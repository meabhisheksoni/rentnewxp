-- ============================================================================
-- DATA MIGRATION SCRIPT: Supabase -> Neon
-- ============================================================================
-- INSTRUCTIONS:
-- 1. First, register a new user in the app and get their user_id
-- 2. Replace 'YOUR_NEW_USER_ID' below with the actual UUID
-- 3. Run this script in Neon SQL Editor
-- ============================================================================

-- Set your new user ID here (get this after registering in the app)
-- You can find it by running: SELECT id FROM users WHERE email = 'your@email.com';

-- ============================================================================
-- STEP 1: INSERT RENTERS (with original IDs preserved)
-- ============================================================================

-- Allow inserting with explicit IDs
ALTER TABLE renters ALTER COLUMN id DROP IDENTITY IF EXISTS;

INSERT INTO renters (id, user_id, name, email, phone, property_address, monthly_rent, move_in_date, is_active, created_at)
VALUES 
  (2, 'YOUR_NEW_USER_ID', 'jkh', NULL, NULL, NULL, '999.00', '2025-09-27', false, '2025-09-27 20:39:52.687454+00'),
  (7, 'YOUR_NEW_USER_ID', 'nitya papa', NULL, NULL, NULL, '9000.00', '2025-09-28', true, '2025-09-28 11:10:34.032812+00'),
  (10, 'YOUR_NEW_USER_ID', 'simran', NULL, NULL, NULL, '300.00', '2025-09-29', true, '2025-09-29 12:55:41.73533+00'),
  (12, 'YOUR_NEW_USER_ID', 'raahul', NULL, NULL, NULL, '4000.00', '2025-09-30', true, '2025-09-29 19:28:46.411654+00'),
  (15, 'YOUR_NEW_USER_ID', 'Papa', NULL, NULL, NULL, '5000.00', '2025-10-02', true, '2025-10-01 18:42:29.774364+00'),
  (16, 'YOUR_NEW_USER_ID', 'gyanneasdh', NULL, NULL, NULL, '5000.00', '2025-10-02', false, '2025-10-02 09:03:19.45215+00'),
  (17, 'YOUR_NEW_USER_ID', 'Amit Soni', NULL, NULL, NULL, '2500.00', '2019-10-02', true, '2025-10-02 09:12:51.098684+00'),
  (21, 'YOUR_NEW_USER_ID', 'nitya papa', NULL, NULL, NULL, '9000.00', '2022-01-01', true, '2025-10-13 10:43:47.936273+00'),
  (22, 'YOUR_NEW_USER_ID', 'ram', NULL, NULL, NULL, '600.00', '2025-10-30', false, '2025-10-30 18:00:14.048442+00'),
  (23, 'YOUR_NEW_USER_ID', 'mahaeh', NULL, NULL, NULL, '5000.00', '2025-11-16', true, '2025-11-16 17:58:56.06402+00'),
  (24, 'YOUR_NEW_USER_ID', 'Ram bhaiya', NULL, NULL, NULL, '6000.00', '2025-05-06', true, '2025-11-17 15:21:37.559524+00')
ON CONFLICT (id) DO NOTHING;

-- Reset sequence to continue after max ID
SELECT setval('renters_id_seq', (SELECT MAX(id) FROM renters));

-- Restore identity
ALTER TABLE renters ALTER COLUMN id ADD GENERATED ALWAYS AS IDENTITY;

-- ============================================================================
-- STEP 2: INSERT MONTHLY BILLS (with original UUIDs)
-- ============================================================================

INSERT INTO monthly_bills (id, user_id, renter_id, month, year, rent_amount, 
  electricity_enabled, electricity_initial_reading, electricity_final_reading, 
  electricity_multiplier, electricity_reading_date, electricity_amount,
  motor_enabled, motor_initial_reading, motor_final_reading,
  motor_multiplier, motor_number_of_people, motor_reading_date, motor_amount,
  water_enabled, water_amount, maintenance_enabled, maintenance_amount,
  total_amount, total_payments, pending_amount, created_at, updated_at)
VALUES 
  ('10ee9323-3572-492e-a794-18114de07c2c', 'YOUR_NEW_USER_ID', 7, 8, 2025, '90000.00', true, 6983, 7277, '9.00', '2025-09-28', '2646.00', true, 1134, 1161, '9.00', 2, '2025-09-28', '121.50', true, '200.00', false, '0.00', '92967.50', '7833.00', '85134.50', '2025-09-28 11:14:20.93176+00', '2025-11-16 16:32:06.862688+00'),
  ('3fb880db-cea7-4b2f-a829-adca87ebf955', 'YOUR_NEW_USER_ID', 7, 9, 2025, '9000.00', false, 7277, 7277, '9.00', '2025-09-28', '0.00', false, 1161, 1161, '9.00', 2, '2025-09-28', '0.00', false, '0.00', false, '0.00', '9000.00', '7966.00', '1034.00', '2025-09-28 17:18:33.839223+00', '2025-09-30 08:18:56.073761+00'),
  ('5b3f8748-0cf4-4039-a3c4-289d0e8c4410', 'YOUR_NEW_USER_ID', 7, 11, 2025, '9000.00', true, 7766, 7879, '9.00', '2025-11-16', '1017.00', true, 1216, 1236, '9.00', 2, '2025-11-16', '90.00', true, '125.00', false, '0.00', '11513.00', '10000.00', '1513.00', '2025-11-16 18:36:20.496478+00', '2025-12-01 13:59:16.189941+00'),
  ('18fc2041-5dcf-47a2-927f-470d7c594ee9', 'YOUR_NEW_USER_ID', 7, 12, 2025, '9000.00', true, 7879, 7981, '9.00', '2025-12-01', '918.00', true, 1236, 1255, '9.00', 2, '2025-12-01', '85.50', false, '0.00', false, '0.00', '11506.50', '10000.00', '1506.50', '2025-12-01 14:07:38.296235+00', '2025-12-11 06:22:31.081728+00'),
  ('92aff657-c5e2-44b9-87fd-2b849749dc2c', 'YOUR_NEW_USER_ID', 12, 9, 2025, '4000.00', true, 578, 985, '9.00', '2025-09-29', '3663.00', true, 2202, 3394, '9.00', 2, '2025-09-29', '5364.00', true, '300.00', false, '0.00', '13327.00', '4545.00', '8782.00', '2025-09-29 19:32:18.800062+00', '2025-09-30 09:18:12.705002+00'),
  ('44751a4b-661f-4047-8f82-a569a228254a', 'YOUR_NEW_USER_ID', 16, 10, 2025, '5000.00', true, 345, 567, '9.00', '2025-10-02', '1998.00', true, 34, 56, '9.00', 2, '2025-10-02', '99.00', true, '300.00', false, '0.00', '7397.00', '7000.00', '397.00', '2025-10-02 09:04:34.433975+00', '2025-10-02 09:04:34.433975+00'),
  ('cc90ca55-38c7-4191-a279-b94da99e43f2', 'YOUR_NEW_USER_ID', 17, 10, 2025, '2500.00', true, 0, 0, '9.00', '2025-10-02', '0.00', false, 0, 0, '9.00', 2, '2025-10-02', '0.00', false, '0.00', false, '0.00', '2500.00', '566.00', '1934.00', '2025-10-02 09:15:54.75285+00', '2025-10-02 09:16:13.585534+00'),
  ('03324937-5c7d-4681-a4df-e9360c9e29e5', 'YOUR_NEW_USER_ID', 21, 10, 2025, '9000.00', true, 44, 67, '9.00', '2025-10-13', '207.00', false, 0, 0, '9.00', 2, '2025-10-13', '0.00', false, '0.00', false, '0.00', '9207.00', '0.00', '9207.00', '2025-10-13 10:53:09.267881+00', '2025-10-13 10:53:09.267881+00'),
  ('bccc78d9-d169-4206-b405-b688ef65183a', 'YOUR_NEW_USER_ID', 23, 8, 2025, '5000.00', true, 444, 656, '9.00', '2025-11-16', '1908.00', false, 0, 0, '9.00', 2, '2025-11-16', '0.00', false, '0.00', true, '777.00', '7751.00', '0.00', '7751.00', '2025-11-16 20:38:49.021998+00', '2025-11-16 20:41:20.889317+00'),
  ('c588ce32-3bb7-4e65-88bd-8cd243697c0b', 'YOUR_NEW_USER_ID', 23, 10, 2025, '5000.00', true, 44, 55, '9.00', '2025-11-16', '99.00', false, 0, 0, '9.00', 2, '2025-11-16', '0.00', false, '0.00', false, '0.00', '5099.00', '0.00', '5099.00', '2025-11-16 18:35:18.912931+00', '2025-11-16 18:35:38.830563+00'),
  ('ee156a23-12e1-48e3-80f3-7f220eb73f8b', 'YOUR_NEW_USER_ID', 23, 11, 2025, '5000.00', true, 55, 559, '9.00', '2025-11-16', '4536.00', false, 0, 0, '9.00', 2, '2025-11-16', '0.00', false, '0.00', false, '0.00', '9536.00', '0.00', '9536.00', '2025-11-16 18:53:41.044423+00', '2025-11-16 20:24:12.717155+00'),
  ('a3fdd258-2567-4cc2-a529-d89c0e582f16', 'YOUR_NEW_USER_ID', 24, 8, 2025, '6000.00', true, 574, 802, '10.00', '2025-11-17', '2280.00', false, 0, 0, '9.00', 2, '2025-11-17', '0.00', true, '270.00', false, '0.00', '8550.00', '8000.00', '550.00', '2025-11-17 15:27:31.412635+00', '2025-11-17 15:27:31.412635+00'),
  ('59b12d77-5161-4d0f-bcfd-4e07fab5dd2c', 'YOUR_NEW_USER_ID', 24, 9, 2025, '6000.00', true, 802, 919, '10.00', '2025-11-17', '1170.00', false, 0, 0, '9.00', 2, '2025-11-17', '0.00', false, '0.00', false, '0.00', '7720.00', '7500.00', '220.00', '2025-11-17 15:29:22.491648+00', '2025-11-17 15:29:22.491648+00'),
  ('8ff13149-5fd9-4f14-b8b1-3ef5bf9a4c31', 'YOUR_NEW_USER_ID', 24, 10, 2025, '6000.00', true, 919, 1071, '10.00', '2025-11-17', '1520.00', false, 0, 0, '9.00', 2, '2025-11-17', '0.00', false, '0.00', false, '0.00', '7740.00', '6000.00', '1740.00', '2025-11-17 15:30:03.637532+00', '2025-11-17 15:32:39.848126+00'),
  ('6639cb90-6796-4663-9d86-7c6cb7894cd6', 'YOUR_NEW_USER_ID', 24, 11, 2025, '6000.00', true, 1071, 1106, '10.00', '2025-11-17', '350.00', false, 0, 0, '9.00', 2, '2025-11-17', '0.00', true, '220.00', false, '0.00', '8310.00', '9000.00', '-690.00', '2025-11-17 15:33:56.144241+00', '2025-11-17 15:35:55.527005+00'),
  ('2c7481c8-73b3-41fe-b7e9-a573a65840ef', 'YOUR_NEW_USER_ID', 24, 12, 2025, '6000.00', true, 1106, 1141, '9.00', '2025-12-10', '315.00', false, 0, 0, '9.00', 2, '2025-12-10', '0.00', true, '200.00', false, '0.00', '6515.00', '690.00', '5825.00', '2025-12-10 19:24:09.928386+00', '2025-12-10 19:24:09.928386+00')
ON CONFLICT (id) DO NOTHING;

-- ============================================================================
-- STEP 3: INSERT ADDITIONAL EXPENSES
-- ============================================================================

INSERT INTO additional_expenses (id, monthly_bill_id, description, amount, date, created_at)
VALUES 
  ('9303d232-da00-4e96-9acb-6c5f94ba241a', 'bccc78d9-d169-4206-b405-b688ef65183a', 'ss', '66.00', '2025-11-16', '2025-11-16 20:41:20.889317+00'),
  ('c3e8caf8-e795-4b30-b7ce-434dab70a96c', '59b12d77-5161-4d0f-bcfd-4e07fab5dd2c', 'Pending of previous month', '550.00', '2025-11-17', '2025-11-17 15:29:22.491648+00'),
  ('fc9282a0-237e-4c7c-bc23-aba281964f23', '8ff13149-5fd9-4f14-b8b1-3ef5bf9a4c31', 'Previous month', '220.00', '2025-11-17', '2025-11-17 15:32:39.848126+00'),
  ('10e0d4c1-57b6-41e1-9887-f9d8dace4ffe', '6639cb90-6796-4663-9d86-7c6cb7894cd6', 'Previous month pending', '1740.00', '2025-11-17', '2025-11-17 15:34:46.391922+00'),
  ('92279a6b-3254-47fa-8134-a9e304d0c6e4', '5b3f8748-0cf4-4039-a3c4-289d0e8c4410', 'october pending', '75.00', '2025-12-01', '2025-12-01 13:59:16.189941+00'),
  ('f5391fa4-3400-412f-84ea-6d6f72a2c1a3', '5b3f8748-0cf4-4039-a3c4-289d0e8c4410', 'cylinder in october', '857.00', '2025-12-01', '2025-12-01 13:59:16.189941+00'),
  ('7952c930-08cc-45d7-b383-7fa23a0a609f', '5b3f8748-0cf4-4039-a3c4-289d0e8c4410', 'aunti recharge', '349.00', '2025-12-01', '2025-12-01 13:59:16.189941+00'),
  ('8e1bc59a-25e1-410c-9242-b6c9a4f32bfd', '18fc2041-5dcf-47a2-927f-470d7c594ee9', 'Nov left', '1503.00', '2025-12-11', '2025-12-11 06:20:57.836309+00')
ON CONFLICT (id) DO NOTHING;

-- ============================================================================
-- STEP 4: INSERT BILL PAYMENTS
-- ============================================================================

INSERT INTO bill_payments (id, monthly_bill_id, amount, payment_date, payment_type, note, created_at)
VALUES 
  ('3b73c20b-b3e1-402a-af5c-207c94447d8f', '3fb880db-cea7-4b2f-a829-adca87ebf955', '77.00', '2025-09-30', 'cash', 'hh', '2025-09-30 08:12:36.507889+00'),
  ('133c563d-3cf2-4558-8cbb-7aa2fd2cb764', '3fb880db-cea7-4b2f-a829-adca87ebf955', '7889.00', '2025-09-30', 'cash', 'fdsf', '2025-09-30 08:18:56.319694+00'),
  ('c2fdf77c-54e5-4746-acdf-0683a51343b7', '92aff657-c5e2-44b9-87fd-2b849749dc2c', '4545.00', '2025-09-30', 'cash', 'rgr', '2025-09-30 09:18:13.004054+00'),
  ('7e6f9dc9-8c20-46a4-84a1-aef146d51eb4', '44751a4b-661f-4047-8f82-a569a228254a', '7000.00', '2025-10-02', 'online', 'phonepe', '2025-10-02 09:04:34.616078+00'),
  ('9e2a6770-9d32-46be-95c8-7f36e584da79', 'cc90ca55-38c7-4191-a279-b94da99e43f2', '566.00', '2025-10-02', 'online', NULL, '2025-10-02 09:16:13.751259+00'),
  ('2e23192e-cc86-45bc-bc0d-14791ee7338a', '10ee9323-3572-492e-a794-18114de07c2c', '7833.00', '2025-09-30', 'cash', 'fjds', '2025-09-30 09:21:36.166772+00'),
  ('4d34412a-32ee-44ae-836b-047da42322b7', 'a3fdd258-2567-4cc2-a529-d89c0e582f16', '8000.00', '2025-11-17', 'online', NULL, '2025-11-17 15:27:31.412635+00'),
  ('ba7b7146-7ee0-4f48-a0dd-407ada6d16ba', '59b12d77-5161-4d0f-bcfd-4e07fab5dd2c', '7500.00', '2025-11-17', 'online', NULL, '2025-11-17 15:29:22.491648+00'),
  ('6c148f8e-2e1c-4010-acbc-ab2c90fd781e', '8ff13149-5fd9-4f14-b8b1-3ef5bf9a4c31', '6000.00', '2025-11-17', 'online', NULL, '2025-11-17 15:32:39.848126+00'),
  ('adcd0657-7c6e-4963-84b2-d4429112e831', '6639cb90-6796-4663-9d86-7c6cb7894cd6', '9000.00', '2025-11-17', 'online', NULL, '2025-11-17 15:35:55.527005+00'),
  ('37cf17cf-b24b-43eb-b766-4194cbf369f9', '5b3f8748-0cf4-4039-a3c4-289d0e8c4410', '10000.00', '2025-12-01', 'online', NULL, '2025-12-01 13:59:16.189941+00'),
  ('ec34236c-e636-49b8-a39b-26a94277535c', '2c7481c8-73b3-41fe-b7e9-a573a65840ef', '690.00', '2025-12-10', 'cash', 'extra muje dene the', '2025-12-10 19:24:09.928386+00'),
  ('7e623499-470a-4b79-8612-3a9fa058a0f2', '18fc2041-5dcf-47a2-927f-470d7c594ee9', '10000.00', '2025-12-11', 'online', NULL, '2025-12-11 06:20:57.836309+00')
ON CONFLICT (id) DO NOTHING;

-- ============================================================================
-- VERIFY IMPORT
-- ============================================================================

SELECT 
  (SELECT COUNT(*) FROM renters) as renter_count,
  (SELECT COUNT(*) FROM monthly_bills) as bill_count,
  (SELECT COUNT(*) FROM additional_expenses) as expense_count,
  (SELECT COUNT(*) FROM bill_payments) as payment_count;
